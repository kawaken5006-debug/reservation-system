# ğŸ“§ ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

## âœ… å®Œäº†ã—ãŸå®Ÿè£…å†…å®¹

### 1. é–‹ç™ºç”¨æ©Ÿèƒ½ï¼ˆå³åº§ã«å‹•ä½œç¢ºèªå¯èƒ½ï¼‰
- âœ… èªè¨¼URLé€ä¿¡å¾Œã€è‡ªå‹•ã§æ–°ã—ã„ã‚¿ãƒ–ã§èªè¨¼URLã‚’é–‹ã
- âœ… ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯æ™‚ã¯ã‚¢ãƒ©ãƒ¼ãƒˆã§URLã‚’è¡¨ç¤º

### 2. æœ¬ç•ªç”¨æ©Ÿèƒ½ï¼ˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼‰
- âœ… Nodemailerçµ±åˆ
- âœ… Gmailé€ä¿¡å¯¾å¿œ
- âœ… ç’°å¢ƒå¤‰æ•°ã§ã®èªè¨¼æƒ…å ±ç®¡ç†
- âœ… HTMLãƒ¡ãƒ¼ãƒ«å¯¾å¿œ

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### Step 1: ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

ã¾ãŸã¯å€‹åˆ¥ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:
```bash
npm install nodemailer dotenv
```

---

### Step 2: Gmailã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å–å¾—

#### 2-1. Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³
https://myaccount.google.com ã«ã‚¢ã‚¯ã‚»ã‚¹

#### 2-2. 2æ®µéšèªè¨¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’æœ‰åŠ¹åŒ–ï¼ˆæœªè¨­å®šã®å ´åˆï¼‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ â†’ 2æ®µéšèªè¨¼ãƒ—ãƒ­ã‚»ã‚¹

#### 2-3. ã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
1. https://myaccount.google.com/apppasswords ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œã‚¢ãƒ—ãƒªã‚’é¸æŠã€â†’ã€Œãã®ä»–ï¼ˆã‚«ã‚¹ã‚¿ãƒ åï¼‰ã€
3. åå‰: ã€Œãƒªãƒã‚­ãƒ¥ã‚¢äºˆç´„ã‚·ã‚¹ãƒ†ãƒ ã€
4. ã€Œç”Ÿæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
5. **16æ–‡å­—ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹**ï¼ˆä¾‹: `abcd efgh ijkl mnop`ï¼‰
6. ã“ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜

---

### Step 3: .env ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

1. `.env.example` ã‚’ `.env` ã«ã‚³ãƒ”ãƒ¼:

```bash
copy .env.example .env
```

2. `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†:

```env
EMAIL_USER=rehacure@gmail.com
EMAIL_PASS=abcd efgh ijkl mnop
```

âš ï¸ **æ³¨æ„**: `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã¯çµ¶å¯¾ã«Gitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã§ãã ã•ã„ï¼

---

### Step 4: ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
node server.js
```

ã¾ãŸã¯é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆè‡ªå‹•å†èµ·å‹•ï¼‰:
```bash
npm run dev
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ–¹æ³•

### é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ãªã—ï¼‰
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:5000` ã‚’é–‹ã
2. ã€Œæ–°è¦äºˆç´„ã€â†’ã€Œâ—‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. æ—¢å­˜é¡§å®¢ã‚’é¸æŠï¼ˆä¾‹: ID 2222ï¼‰
4. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æœªç™»éŒ²ã®å ´åˆã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šç”»é¢ãŒè¡¨ç¤º
5. èªè¨¼æ–¹æ³•ã§ã€Œãƒ¡ãƒ¼ãƒ«ã€ã‚’é¸æŠ
6. ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›: `test@example.com`
7. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›
8. ã€Œèªè¨¼URLã‚’é€ä¿¡ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
9. **1ç§’å¾Œã«è‡ªå‹•ã§èªè¨¼URLãŒæ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã** â† é–‹ç™ºç”¨æ©Ÿèƒ½
10. äºˆç´„å®Œäº†ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ï¼ˆå®Ÿéš›ã®ãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼‰
1. `.env` ã«æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š
2. ä¸Šè¨˜ãƒ†ã‚¹ãƒˆæ‰‹é †ã‚’å®Ÿè¡Œ
3. **å®Ÿéš›ã®ãƒ¡ãƒ¼ãƒ«ãŒé€ä¿¡ã•ã‚Œã‚‹**
4. ãƒ¡ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ã‚’ç¢ºèª
5. èªè¨¼URLã‚’ã‚¯ãƒªãƒƒã‚¯
6. äºˆç´„å®Œäº†

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### âŒ ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¨ãƒ©ãƒ¼ã€ŒInvalid loginã€
â†’ ã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹
â†’ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª

### âŒ ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¨ãƒ©ãƒ¼ã€ŒLess secure app accessã€
â†’ Gmailã§2æ®µéšèªè¨¼ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ãªã„
â†’ ã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã¯ãªãé€šå¸¸ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã„ã‚‹

### âŒ èªè¨¼URLãŒè‡ªå‹•ã§é–‹ã‹ãªã„
â†’ ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç¢ºèª
â†’ ã‚¢ãƒ©ãƒ¼ãƒˆã§URLãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆ

### âŒ ãƒ¡ãƒ¼ãƒ«ãŒå±Šã‹ãªã„
â†’ è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç¢ºèª
â†’ ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§é€ä¿¡æˆåŠŸãƒ­ã‚°ã‚’ç¢ºèª
â†’ Gmailå´ã§é€ä¿¡åˆ¶é™ãŒã‹ã‹ã£ã¦ã„ãªã„ã‹ç¢ºèª

---

## ğŸ“ æœ¬ç•ªç’°å¢ƒã¸ã®ç§»è¡Œæ™‚ã®å¤‰æ›´ç‚¹

### 1. é–‹ç™ºç”¨ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤
`server.js` ã®312è¡Œç›®ä»˜è¿‘:
```javascript
res.json({ 
  success: true, 
  message: sendSuccess ? 'èªè¨¼URLã‚’é€ä¿¡ã—ã¾ã—ãŸ' : 'èªè¨¼URLã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ',
  // ğŸ”§ æœ¬ç•ªã§ã¯ä»¥ä¸‹ã®è¡Œã‚’å‰Šé™¤
  verificationUrl  // â† ã“ã®è¡Œã‚’å‰Šé™¤
});
```

### 2. èªè¨¼URLã®è‡ªå‹•ã‚ªãƒ¼ãƒ—ãƒ³æ©Ÿèƒ½ã®å‰Šé™¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
`index.html` ã®870è¡Œç›®ä»˜è¿‘ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ:
```javascript
// é–‹ç™ºç”¨æ©Ÿèƒ½ãŒä¸è¦ãªå ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
/*
if (result.verificationUrl) {
  setTimeout(() => {
    window.open(result.verificationUrl, '_blank');
  }, 1000);
}
*/
```

### 3. æœ¬ç•ªç”¨URLã®å¤‰æ›´
`server.js` ã®272è¡Œç›®:
```javascript
// æœ¬ç•ªç’°å¢ƒã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã«å¤‰æ›´
const verificationUrl = `https://your-domain.com/verify?token=${token}`;
```

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [ ] SMSé€ä¿¡æ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆTwilioç­‰ï¼‰
- [ ] ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®HTMLåŒ–
- [ ] èªè¨¼URLæœ‰åŠ¹æœŸé™åˆ‡ã‚Œæ™‚ã®å‡¦ç†æ”¹å–„
- [ ] èªè¨¼å®Œäº†å¾Œã®è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½

---

## ğŸ“š å‚è€ƒè³‡æ–™

- Nodemailerå…¬å¼: https://nodemailer.com
- Gmailã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: https://myaccount.google.com/apppasswords
- Twilio SMSé€ä¿¡: https://www.twilio.com/docs/sms
